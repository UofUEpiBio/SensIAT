<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Produce fitted model for group (treatment or control) — fit_SensIAT_fulldata_model • SensIAT</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Produce fitted model for group (treatment or control) — fit_SensIAT_fulldata_model"><meta name="description" content="Produces a fitted model that may be used to produce estimates of mean and
variance for the given group."><meta property="og:description" content="Produces a fitted model that may be used to produce estimates of mean and
variance for the given group."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SensIAT</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/UofUEpiBio/SensIAT/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Produce fitted model for group (treatment or control)</h1>
      <small class="dont-index">Source: <a href="https://github.com/UofUEpiBio/SensIAT/blob/main/R/fulldata_model.R" class="external-link"><code>R/fulldata_model.R</code></a>, <a href="https://github.com/UofUEpiBio/SensIAT/blob/main/R/within_group_model.R" class="external-link"><code>R/within_group_model.R</code></a></small>
      <div class="d-none name"><code>fit_SensIAT_within_group_model.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Produces a fitted model that may be used to produce estimates of mean and
variance for the given group.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">fit_SensIAT_fulldata_model</span><span class="op">(</span><span class="va">data</span>, <span class="va">trt</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">fit_SensIAT_within_group_model</span><span class="op">(</span></span>
<span>  <span class="va">group.data</span>,</span>
<span>  <span class="va">outcome_modeler</span>,</span>
<span>  <span class="va">id</span>,</span>
<span>  <span class="va">outcome</span>,</span>
<span>  <span class="va">time</span>,</span>
<span>  <span class="va">knots</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  End <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  intensity.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  outcome.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  influence.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  spline.degree <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  add.terminal.observations <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>the full data set.</p></dd>


<dt id="arg-trt">trt<a class="anchor" aria-label="anchor" href="#arg-trt"></a></dt>
<dd><p>an expression that determine what is treated as the treatment.
Everything not treatment is considered control.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>common arguments passed to <code>fit_SensIAT_within_group_model</code>.</p></dd>


<dt id="arg-group-data">group.data<a class="anchor" aria-label="anchor" href="#arg-group-data"></a></dt>
<dd><p>The data for the group that is being analyzed.
Preferably passed in as a single <code>tibble</code> that internally is
subsetted/filtered as needed.</p></dd>


<dt id="arg-outcome-modeler">outcome_modeler<a class="anchor" aria-label="anchor" href="#arg-outcome-modeler"></a></dt>
<dd><p>function for fitting the outcome model.
Called with a formula, data argument and <code>outcome.args</code> list.</p></dd>


<dt id="arg-id">id<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p>The variable that identifies the patient.</p></dd>


<dt id="arg-outcome">outcome<a class="anchor" aria-label="anchor" href="#arg-outcome"></a></dt>
<dd><p>The variable that contains the outcome.</p></dd>


<dt id="arg-time">time<a class="anchor" aria-label="anchor" href="#arg-time"></a></dt>
<dd><p>The variable that contains the time.</p></dd>


<dt id="arg-knots">knots<a class="anchor" aria-label="anchor" href="#arg-knots"></a></dt>
<dd><p>knot locations for defining the spline basis.</p></dd>


<dt id="arg-alpha">alpha<a class="anchor" aria-label="anchor" href="#arg-alpha"></a></dt>
<dd><p>The sensitivity parameter.</p></dd>


<dt id="arg-end">End<a class="anchor" aria-label="anchor" href="#arg-end"></a></dt>
<dd><p>The end time for this data analysis, we need to set the default value as the
max value of the time.</p></dd>


<dt id="arg-intensity-args">intensity.args<a class="anchor" aria-label="anchor" href="#arg-intensity-args"></a></dt>
<dd><p>A list of optional arguments for intensity model.
See the Intensity Arguments section.</p></dd>


<dt id="arg-outcome-args">outcome.args<a class="anchor" aria-label="anchor" href="#arg-outcome-args"></a></dt>
<dd><p>parameters as needed passed into the <code>outcome_modeler</code>.
One special element may be <code>'model.modifications'</code> which, if present,
should be a formula that will be used to modify the outcome model per, <a href="https://rdrr.io/r/stats/update.formula.html" class="external-link">update.formula</a>.</p></dd>


<dt id="arg-influence-args">influence.args<a class="anchor" aria-label="anchor" href="#arg-influence-args"></a></dt>
<dd><p>A list of optional arguments used when computing the influence.
See the Influence Arguments section.</p></dd>


<dt id="arg-spline-degree">spline.degree<a class="anchor" aria-label="anchor" href="#arg-spline-degree"></a></dt>
<dd><p>The degree of the spline basis.</p></dd>


<dt id="arg-add-terminal-observations">add.terminal.observations<a class="anchor" aria-label="anchor" href="#arg-add-terminal-observations"></a></dt>
<dd><p>Logical indicating whether to add terminal
observations to the data.  If TRUE, data may not contain any <code>NA</code>s.
if FALSE, data will be assumed to already include the terminal
observations</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a list with class <code>SensIAT-fulldata-fitted-model</code> with two components,
<code>control</code> and <code>treatment</code>, each of which is an independently fitted
<code>SensIAT-within-group-fitted-model</code> fit with the fit_within_group_model
function.</p>
<p>Should return everything needed to define the fit of the model.
This can then be used for producing the estimates of mean, variance,
and in turn treatment effect.  For the full data model a list with two
models one each for the treatment and control groups.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function should be agnostic to whether it is being provided a
treatment or control group.</p>
    </div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a></h2>

<ul><li><p><code>fit_SensIAT_fulldata_model()</code>: Fit the sensitivity analysis for both treatment and control groups.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="intensity-arguments">Intensity Arguments<a class="anchor" aria-label="anchor" href="#intensity-arguments"></a></h2>


<p>The <code>intensity.args</code> list may contain the following elements:</p><ul><li><p><strong><code>model.modifications</code></strong> A formula that will be used to modify the intensity model from it's default, per <a href="https://rdrr.io/r/stats/update.formula.html" class="external-link">update.formula</a>.</p></li>
<li><p><strong><code>kernel</code></strong> The kernel function for the intensity model. Default is the Epanechnikov kernel.</p></li>
<li><p><strong><code>bandwidth</code></strong> The bandwidth for the intensity model kernel.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="influence-arguments">Influence Arguments<a class="anchor" aria-label="anchor" href="#influence-arguments"></a></h2>



<p>The <code>influence.args</code> list may contain the following elements:</p><ul><li><p><strong><code>method</code></strong> The method for integrating, adaptive or fixed quadrature. Default is <code>'adaptive'</code>.</p></li>
<li><p><strong><code>tolerance</code></strong> The tolerance when using adaptive quadrature.</p></li>
<li><p><strong><code>delta</code></strong> The bin width for fixed quadrature.</p></li>
<li><p><strong><code>resolution</code></strong> alternative to <code>delta</code> by specifying the number of bins.</p></li>
<li><p><strong><code>fix_discontinuity</code></strong> Whether to account for the discontinuity in the influence at observation times.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="va">model</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>    <span class="fu">fit_SensIAT_within_group_model</span><span class="op">(</span></span></span>
<span class="r-in"><span>        group.data <span class="op">=</span> <span class="va">SensIAT_example_data</span>,</span></span>
<span class="r-in"><span>        outcome_modeler <span class="op">=</span> <span class="va">fit_SensIAT_single_index_fixed_coef_model</span>,</span></span>
<span class="r-in"><span>        alpha <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.6</span>, <span class="op">-</span><span class="fl">0.3</span>, <span class="fl">0</span>, <span class="fl">0.3</span>, <span class="fl">0.6</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        id <span class="op">=</span> <span class="va">Subject_ID</span>,</span></span>
<span class="r-in"><span>        outcome <span class="op">=</span> <span class="va">Outcome</span>,</span></span>
<span class="r-in"><span>        time <span class="op">=</span> <span class="va">Time</span>,</span></span>
<span class="r-in"><span>        End <span class="op">=</span> <span class="fl">830</span>,</span></span>
<span class="r-in"><span>        knots <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">60</span>,<span class="fl">260</span>,<span class="fl">460</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Andrew Redd, Yujing Gao, Shu Yang, Bonnie Smith, Ravi Varadhan, Daniel Scharfstein.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

